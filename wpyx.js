/*
  * 王派医学
  * 解锁课程
  * 可下载到本地观看
  * 可以支持外部下载（导出）
  * http可弃用主机名 此处只是记录
[rewrite_local]
^https:\/\/api-app\.wangpaiyixue\.cn\/v1\/goods\/details\/stage url script-response-body https://raw.githubusercontent.com/Yu9191/Rewrite/main/wpyx.js
#^http:\/\/(119\.36\.175\.\d+|104\.251\.228\.\d+|hw-dl\.videocc\.net).*\.zip$ url script-request-header https://raw.githubusercontent.com/Yu9191/Rewrite/main/wpxz.js
#如果下面这个误杀用上面这个
^http:\/\/(\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}|hw-dl\.videocc\.net).*\.zip$ url script-request-header https://raw.githubusercontent.com/Yu9191/Rewrite/main/wpxz.js
[mitm]
hostname = api-app.wangpaiyixue.cn, 119.36.175.*, hw-dl.videocc.net
* */
var iｉl='jsjiami.com.v7';const IiIII1i1=I11il111;(function(I1lIiilI,IIili1il,iI1liiI1,IIiI1i1,I1Il1III,ilIlllI,I11il1II){return I1lIiilI=I1lIiilI>>0x9,ilIlllI='hs',I11il1II='hs',function(Ili1iili,IiiI1I1,lIIi1Iii,i1l1ilil,lliiIIi1){const IlliI=I11il111;i1l1ilil='tfi',ilIlllI=i1l1ilil+ilIlllI,lliiIIi1='up',I11il1II+=lliiIIi1,ilIlllI=lIIi1Iii(ilIlllI),I11il1II=lIIi1Iii(I11il1II),lIIi1Iii=0x0;const l11Il1i=Ili1iili();while(!![]&&--IIiI1i1+IiiI1I1){try{i1l1ilil=-parseInt(IlliI(0x145,'^y%W'))/0x1*(parseInt(IlliI(0x1ac,'VWA^'))/0x2)+parseInt(IlliI(0x1cc,'FU&c'))/0x3*(parseInt(IlliI(0x19d,'FU&c'))/0x4)+-parseInt(IlliI(0x199,'OVhT'))/0x5+parseInt(IlliI(0x174,'S*QZ'))/0x6+parseInt(IlliI(0x1ae,'qiwp'))/0x7*(-parseInt(IlliI(0x1b4,'yurR'))/0x8)+parseInt(IlliI(0x1c4,'xTqo'))/0x9*(-parseInt(IlliI(0x153,'[jbB'))/0xa)+-parseInt(IlliI(0x14a,'5E4*'))/0xb*(-parseInt(IlliI(0x17d,'i5B['))/0xc);}catch(iIlIiIil){i1l1ilil=lIIi1Iii;}finally{lliiIIi1=l11Il1i[ilIlllI]();if(I1lIiilI<=IIiI1i1)lIIi1Iii?I1Il1III?i1l1ilil=lliiIIi1:I1Il1III=lliiIIi1:lIIi1Iii=lliiIIi1;else{if(lIIi1Iii==I1Il1III['replace'](/[ClSGIqOPDYuyrUhexKT=]/g,'')){if(i1l1ilil===IiiI1I1){l11Il1i['un'+ilIlllI](lliiIIi1);break;}l11Il1i[I11il1II](lliiIIi1);}}}}}(iI1liiI1,IIili1il,function(i11iilll,lI1iI1ll,l111IllI,II1illll,l111IlIi,lllII1l1,IllIil){return lI1iI1ll='\x73\x70\x6c\x69\x74',i11iilll=arguments[0x0],i11iilll=i11iilll[lI1iI1ll](''),l111IllI='\x72\x65\x76\x65\x72\x73\x65',i11iilll=i11iilll[l111IllI]('\x76'),II1illll='\x6a\x6f\x69\x6e',(0x1931e6,i11iilll[II1illll](''));});}(0x17800,0xc66d0,I1i1I1Il,0xbe),I1i1I1Il)&&(iｉl=0x2a6);const $=new Env(IiIII1i1(0x188,'bEl1'),{'logLevel':IiIII1i1(0x16f,'FU&c')});var body=$response[IiIII1i1(0x1aa,'aS*w')];$[IiIII1i1(0x1c2,'i5B[')](body),((async()=>{const IlIilI11=IiIII1i1,li11lill={'pvlVt':function(IliliIIl,iIlIiIli){return IliliIIl(iIlIiIli);},'XVpXP':function(i1Iiii){return i1Iiii();},'RxOZD':IlIilI11(0x169,'[jbB'),'ebHsF':function(IIII111l,IIIil11){return IIII111l!==IIIil11;},'mJKuU':IlIilI11(0x190,'qiwp'),'nRZLb':IlIilI11(0x16d,'kt23'),'PpDhx':function(iI1iIiI,il11I1II){return iI1iIiI!==il11I1II;},'GYzlr':IlIilI11(0x151,'3B%e'),'xVjpc':IlIilI11(0x192,'EuBf'),'VryYw':IlIilI11(0x1c8,'VWA^'),'ICyrq':function(iIIllIil,IliilIl1,l1li11ll,I1IiliIi,iI1iIII){return iIIllIil(IliilIl1,l1li11ll,I1IiliIi,iI1iIII);},'sjsyU':IlIilI11(0x18a,'xSxu'),'amvmL':IlIilI11(0x14c,'4#kN'),'lIJhm':IlIilI11(0x16c,'FU&c'),'ynzpX':IlIilI11(0x194,'9Kjm'),'OFVtW':function(IIi111II,lIiIIilI){return IIi111II===lIiIIilI;},'gcaoQ':IlIilI11(0x14f,'NY93'),'LCNsh':IlIilI11(0x1c5,'D)Kg')};try{if(li11lill[IlIilI11(0x13e,'OVhT')](li11lill[IlIilI11(0x19c,'[fb6')],li11lill[IlIilI11(0x16a,'xSxu')]))return lIIliill[IlIilI11(0x168,'bEl1')]('✅\x20'+ilIii1l[IlIilI11(0x144,'kt23')]+IlIilI11(0x19e,'i5B[')),li11lill[IlIilI11(0x154,'20FT')](lIIIi1Ii,IIi1),li11lill[IlIilI11(0x15c,'aS*w')](lIlIlIII);else{const liii1ll1=await li11lill[IlIilI11(0x18e,'qiwp')](loadUtils);$[IlIilI11(0x141,'X]PS')](li11lill[IlIilI11(0x17c,'nq]p')]);if(!liii1ll1||li11lill[IlIilI11(0x13b,'b50p')](typeof liii1ll1[IlIilI11(0x17a,'[Em$')],li11lill[IlIilI11(0x19f,'xSxu')]))throw new ReferenceError(li11lill[IlIilI11(0x1a7,'gPDh')]);const II1l111I=liii1ll1[IlIilI11(0x17e,'aZLE')](),lII1lI11=li11lill[IlIilI11(0x1af,'OVhT')],lI1il1iI=li11lill[IlIilI11(0x170,'gaHX')],l1lII1I1=II1l111I[IlIilI11(0x19a,'VWA^')][IlIilI11(0x1c1,'4#kN')][IlIilI11(0x1ca,'VWA^')](lII1lI11),IlIiIll1=II1l111I[IlIilI11(0x1cb,'[fb6')][IlIilI11(0x1ba,'[Em$')][IlIilI11(0x15a,'kt23')](lI1il1iI);let I11111lI=li11lill[IlIilI11(0x160,'FU&c')](AES_Decrypt,body,l1lII1I1,IlIiIll1,II1l111I);I11111lI=I11111lI[IlIilI11(0x1be,'aS*w')](/"is_auditioned":\d+/g,li11lill[IlIilI11(0x163,'[fb6')]),I11111lI=I11111lI[IlIilI11(0x18b,'9Kjm')](/"is_buy":\d+/g,li11lill[IlIilI11(0x1b5,'4#kN')]),I11111lI=I11111lI[IlIilI11(0x173,'aZLE')](/"sample":\d+/g,li11lill[IlIilI11(0x162,'EuBf')]),I11111lI=I11111lI[IlIilI11(0x185,'NY93')](/"sample_limit":\d+/g,li11lill[IlIilI11(0x164,'9Kjm')]);let Ii1lliil=li11lill[IlIilI11(0x178,'xiwg')](AES_Encrypt,I11111lI,l1lII1I1,IlIiIll1,II1l111I);$[IlIilI11(0x17f,'[jbB')]({'body':Ii1lliil});}}catch(lIlill1i){if(li11lill[IlIilI11(0x197,'y7yq')](li11lill[IlIilI11(0x1c9,'D)Kg')],li11lill[IlIilI11(0x18f,'xiwg')]))throw new liIlIll1(li11lill[IlIilI11(0x149,')208')]);else $[IlIilI11(0x1c6,'D)Kg')](lIlill1i);}})());function AES_Encrypt(Il1IIlI1,lii1III,iIi11iI,liI1II1l){const li11I1l=IiIII1i1;var l1l1i11I=liI1II1l[li11I1l(0x1a1,'NY93')][li11I1l(0x152,'i5B[')](liI1II1l[li11I1l(0x1cb,'[fb6')][li11I1l(0x184,'gaHX')][li11I1l(0x1ce,'kA$!')](Il1IIlI1),lii1III,{'iv':iIi11iI,'mode':liI1II1l[li11I1l(0x1a9,'3B%e')][li11I1l(0x1a2,'Zhka')],'padding':liI1II1l[li11I1l(0x140,'kt23')][li11I1l(0x196,'5E4*')]});return l1l1i11I[li11I1l(0x137,'Zhka')]();}function AES_Decrypt(I1lI1IIi,iiii1lil,i11Il1I1,lIll1i11){const l1i1illl=IiIII1i1;var II1IiI1i=lIll1i11[l1i1illl(0x191,'i5B[')][l1i1illl(0x15f,'4#kN')](I1lI1IIi,iiii1lil,{'iv':i11Il1I1,'mode':lIll1i11[l1i1illl(0x139,'y7yq')][l1i1illl(0x1a8,'bEl1')],'padding':lIll1i11[l1i1illl(0x176,'4#kN')][l1i1illl(0x183,'i5B[')]});return II1IiI1i[l1i1illl(0x13c,'P0TK')](lIll1i11[l1i1illl(0x189,'xiwg')][l1i1illl(0x138,'bEl1')]);}function I11il111(_0x49a709,_0x1f448d){const _0x2b66ae=I1i1I1Il();return I11il111=function(_0x828d71,_0x557ed8){_0x828d71=_0x828d71-0x137;let _0x31836b=_0x2b66ae[_0x828d71];if(I11il111['rksnIa']===undefined){var _0x43b64e=function(_0x628087){const _0x59d6e5='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x3e1930='',_0x69706d='';for(let _0x5cbd14=0x0,_0x3aaad0,_0x2807a4,_0x46b5e5=0x0;_0x2807a4=_0x628087['charAt'](_0x46b5e5++);~_0x2807a4&&(_0x3aaad0=_0x5cbd14%0x4?_0x3aaad0*0x40+_0x2807a4:_0x2807a4,_0x5cbd14++%0x4)?_0x3e1930+=String['fromCharCode'](0xff&_0x3aaad0>>(-0x2*_0x5cbd14&0x6)):0x0){_0x2807a4=_0x59d6e5['indexOf'](_0x2807a4);}for(let _0x262556=0x0,_0x3c164a=_0x3e1930['length'];_0x262556<_0x3c164a;_0x262556++){_0x69706d+='%'+('00'+_0x3e1930['charCodeAt'](_0x262556)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x69706d);};const _0x33c76e=function(_0x991c83,_0x50be69){let _0x4e20fc=[],_0x2b1da5=0x0,_0x391dfe,_0x2291b0='';_0x991c83=_0x43b64e(_0x991c83);let _0x461c26;for(_0x461c26=0x0;_0x461c26<0x100;_0x461c26++){_0x4e20fc[_0x461c26]=_0x461c26;}for(_0x461c26=0x0;_0x461c26<0x100;_0x461c26++){_0x2b1da5=(_0x2b1da5+_0x4e20fc[_0x461c26]+_0x50be69['charCodeAt'](_0x461c26%_0x50be69['length']))%0x100,_0x391dfe=_0x4e20fc[_0x461c26],_0x4e20fc[_0x461c26]=_0x4e20fc[_0x2b1da5],_0x4e20fc[_0x2b1da5]=_0x391dfe;}_0x461c26=0x0,_0x2b1da5=0x0;for(let _0x5a8832=0x0;_0x5a8832<_0x991c83['length'];_0x5a8832++){_0x461c26=(_0x461c26+0x1)%0x100,_0x2b1da5=(_0x2b1da5+_0x4e20fc[_0x461c26])%0x100,_0x391dfe=_0x4e20fc[_0x461c26],_0x4e20fc[_0x461c26]=_0x4e20fc[_0x2b1da5],_0x4e20fc[_0x2b1da5]=_0x391dfe,_0x2291b0+=String['fromCharCode'](_0x991c83['charCodeAt'](_0x5a8832)^_0x4e20fc[(_0x4e20fc[_0x461c26]+_0x4e20fc[_0x2b1da5])%0x100]);}return _0x2291b0;};I11il111['jsLucH']=_0x33c76e,_0x49a709=arguments,I11il111['rksnIa']=!![];}const _0x408b03=_0x2b66ae[0x0],_0xe5ec5a=_0x828d71+_0x408b03,_0x3a8917=_0x49a709[_0xe5ec5a];return!_0x3a8917?(I11il111['XLqTvn']===undefined&&(I11il111['XLqTvn']=!![]),_0x31836b=I11il111['jsLucH'](_0x31836b,_0x557ed8),_0x49a709[_0xe5ec5a]=_0x31836b):_0x31836b=_0x3a8917,_0x31836b;},I11il111(_0x49a709,_0x1f448d);}async function loadUtils(){const IIliiIi=IiIII1i1,i1111lil={'DGmwv':IIliiIi(0x1ab,'xSxu'),'jepvN':function(liil11i,Ii1liiIl){return liil11i(Ii1liiIl);},'JmxgS':function(ii1lI){return ii1lI();},'FfNqt':IIliiIi(0x1b8,'b50p'),'Rhwta':function(IlillIIl,ilI111II){return IlillIIl!==ilI111II;},'eGitD':IIliiIi(0x14b,'3B%e'),'cUJkw':function(i1IIi1Ii,Ii1ilI1){return i1IIi1Ii(Ii1ilI1);},'GulnQ':function(lIilllii){return lIilllii();}};let li1Illl=$[IIliiIi(0x167,'D)Kg')](i1111lil[IIliiIi(0x18d,'[Em$')])||'';if(li1Illl&&li1Illl[IIliiIi(0x1bd,'yurR')])return console[IIliiIi(0x1c0,'gPDh')]('✅\x20'+$[IIliiIi(0x181,'NY93')]+IIliiIi(0x150,'gaHX')),i1111lil[IIliiIi(0x15e,'[fb6')](eval,li1Illl),i1111lil[IIliiIi(0x1ad,']c8B')](creatUtils);return console[IIliiIi(0x1a5,'nq]p')](IIliiIi(0x179,'$6kz')+$[IIliiIi(0x13f,'Zhka')]+IIliiIi(0x186,'xSxu')),new Promise((l1IIiIIl,IIIll11l)=>{const lI11I11l=IIliiIi,IIi11lII={'kufeO':i1111lil[lI11I11l(0x1bf,'s%ML')],'XJQjL':function(ilIIIii1,III11iI){const Ii1ii1li=lI11I11l;return i1111lil[Ii1ii1li(0x161,']c8B')](ilIIIii1,III11iI);},'NYZzG':function(Il1Il11i){const lli1l111=lI11I11l;return i1111lil[lli1l111(0x1b1,'^y%W')](Il1Il11i);},'FxoeF':function(Iillli){const iI1il1ii=lI11I11l;return i1111lil[iI1il1ii(0x16b,'30x7')](Iillli);},'nUfvB':i1111lil[lI11I11l(0x148,'9Kjm')],'iKQoU':function(iiIlli1i,ilIIIi){const i1iiI1II=lI11I11l;return i1111lil[i1iiI1II(0x1b7,'5E4*')](iiIlli1i,ilIIIi);},'tbnqL':i1111lil[lI11I11l(0x14e,'$pgO')]};$[lI11I11l(0x165,']c8B')](i1111lil[lI11I11l(0x148,'9Kjm')])[lI11I11l(0x182,'xSxu')](I1IIiIIi=>{const lIlI1l1=lI11I11l;$[lIlI1l1(0x147,'5E4*')](I1IIiIIi,IIi11lII[lIlI1l1(0x14d,'aZLE')]),IIi11lII[lIlI1l1(0x1b6,'clfT')](eval,I1IIiIIi),console[lIlI1l1(0x13d,'swTj')](lIlI1l1(0x155,'VWA^')),IIi11lII[lIlI1l1(0x146,'[Em$')](l1IIiIIl,IIi11lII[lIlI1l1(0x1bc,'yurR')](creatUtils));})[lI11I11l(0x142,'OVhT')](i111IIiI=>{const ll1I1li1=lI11I11l;if(IIi11lII[ll1I1li1(0x158,'gaHX')](IIi11lII[ll1I1li1(0x1b2,'aS*w')],IIi11lII[ll1I1li1(0x17b,'[Em$')])){const l1l111i={'EuaiS':IIi11lII[ll1I1li1(0x1b3,'xiwg')],'IGIeC':function(lliI1ill,iiiiI11I){const lii1i1=ll1I1li1;return IIi11lII[lii1i1(0x1cd,'xiwg')](lliI1ill,iiiiI11I);},'dbQtP':function(l1li1llI){const I111ilII=ll1I1li1;return IIi11lII[I111ilII(0x177,'Zhka')](l1li1llI);}};i1l11Ii1[ll1I1li1(0x19b,'E&R8')](IIi11lII[ll1I1li1(0x187,'iae8')])[ll1I1li1(0x159,'y7yq')](IiiI1Ill=>{const IlliIiIl=ll1I1li1;I1Iill[IlliIiIl(0x15d,'^y%W')](IiiI1Ill,l1l111i[IlliIiIl(0x1a0,'!nCT')]),l1l111i[IlliIiIl(0x13a,'[Em$')](IilIi1,IiiI1Ill),IIlIiIIl[IlliIiIl(0x195,'y7yq')](IlliIiIl(0x18c,'xiwg')),l1l111i[IlliIiIl(0x1b9,'kt23')](IIIl1I1I,l1l111i[IlliIiIl(0x15b,'30x7')](i1i1ii1));})[ll1I1li1(0x1a6,')208')](i11iliI=>{const Il1iIil=ll1I1li1;ili1l1i[Il1iIil(0x156,'Zhka')](Il1iIil(0x1c3,'clfT')+i11iliI),l1l111i[Il1iIil(0x1bb,'!nCT')](iIIIiIIi,i11iliI);});}else console[ll1I1li1(0x1a3,'b50p')](ll1I1li1(0x1a4,'aZLE')+i111IIiI),IIi11lII[ll1I1li1(0x143,'5AoB')](IIIll11l,i111IIiI);});});}function I1i1I1Il(){const il1I1lli=(function(){return[iｉl,'yqjSeusqjTlihaYmiIK.yycrolOGm.IvU7DxKUPC==','FuddL8k8W7hcLwuD','WRBcQ8kLmSkN','o8owW5e8','W4ihtY10','WPRcLSo3CSoa','yWtcTSosiq','W7usW7hcUCkOj8o5','W7DDzSkJW7W','nSkTW61ZD3y+','WPXEeCotbG','ewpdPCo2FG','otJdH8kdW7m','W6DIx8kXW54','vq3cKmkmma','hgpdOCotu8ktW6hcNeG','ySoaW7OivsldKHjzCmkXFf8','tCkTfmoqW7ZcKCoA','W5JdNmoU','WRjeW6iSWPFdUoAiJCoYWPnqWORdISo8W4vunIBcO8ksWPddPvNcS+AuS+AWM+AEOUASRUEGNowkM+I/Qa','jCogWRtcUGC','WRtcMCoEyCod','W7DUcComb8o2W64zWQFcLW','W6CsvdjIW7FcLSomxJtdQmkI','sJxdOmoRASkxW67cGG','WRXZdSoo','WONcKSknbmkf','ddhcOmoNaHdcKq','F0RcV8o4WQxdVYeDjSokWRFdHmkr','WQ8ABSkEk8k9WPi','nqpdRCo9WQ7dGrxcLmkuEmofzSky','BSojWOX3WQBcNmkElNzgW5BdP2G','iSkPW6O','stbEW67dIa','iKbLW6GU','8kAOJtS','WQiAvmoUwSo2jCoJW5CVimkYWPxcMG','WRukx8o+yG','W79BW7JdLmkh','smogW5ZcKCobaf1BmW','WR4nE8ktpSk7WRqWaGlcPeDgWPi','WOnFW6uL','nGtdPSoWWQJdIHBcT8kUwSoMzSkK','pKdcTSkk','pmoKWPRcOq','lmkvWO/cHmkI','WORcLmkszq','iKtcQ8kdW73dN28','CSkS5B+/5Ase5lMz6l2Rz8kPjCkpb+s6P+EHTq','WRm7fCoPW6G','6kwx5A215lMY5yQt'].concat((function(){return['dM1/','ASoLWOZcKdnJvSk0omkkgYOrwSk1W5FdVa','xGBcMSkqcxVcSa','4P2Ui0NdRJyjWPtLIApOV4FMIPpLIi9YA+ITH+E6PEE6Mq','WOuVxmo4wa','eYxdVCksW4u','j0bsW6K3','bJ/dVCkhW4W','pCk7WR8','y0FcVSoyWQGGW5DBWOLZzgZcRLldJSk/ehe7WRFdSGZdI0lcVHa/obNdI0BdLfZdRhX3WPTLWQhdSSoyagWfW4HevrfqjmkuW6yPW7FdHCoKfSoRsHSgaq9Y','W6ddM8ooeCotFLBcQIq','dHdcI8krghtcSfZcR8o5W6rtqY7cTmoyW7ddOY8','i8orW5m','qmkio8ouW4G','amo4W6iMWPq','iCovymkxW4DhquVcOCkxW4rUW6e','W6xcKSkJBIH8ffJdK8kEF8o5WPG','oszF','Emo4AfNcVbpdIcWy','W7Lcz8k9W54','W6f0jConjCokW6m','rSoE57+/5A6V5lQ45AY+5zYdzqxdSg1D5lQ656k7WOm66lww6l6l5lUE6lYo','d8ovWOxcOYa','W4BcQmkke2i','ewtcIa','taPY','oCknW4WHW6i','4P6rx0VcHIpcSSke5yUI6lYg5Awd6lE1eIW','W71MW4u','dWeQW6/dGa','WOBcM8kXlCod','W7FdSCok','W4vsBCkb','wt3cOSoZ','hCo4WPBcOYfjCCkYkmkg','BxGnW6pcPCkFWQSiWRynWPfv','phpdUCoUyq','FbddQ8kNW6BcOgG','WQNdVCo7lhS','B3tdNZddMKvm','W4WAW73cUSkA','tZdcQmo7pq','ahz6W78q','W5pdO8k+WQKEFSoNW4RdNJD3tg8','m8kLW7HSqG','aSk/WPLvkG','qSkll8otWP4','nmklW4O+W6pcN8kdzhDNW7xcNfdcGebQrG4OWRfKWPVcG0jyBL0hW79zWRO/WPbqWRTzmHpcNSkzWPRdSSoYWROiWOaTyGSXlNHTi8kzWOv7W67dO8oLlCk+','W7SHDdTs','WOKnsq','W4RcMSkIh3i','WQxcJ8owW6rQ'].concat((function(){return['WOFcS8oIW7LziW','stFcTSoMebxcJq','B8kCWOqJva','WRJcJmkz','gSkTW7y','emkrWOS','4PYwW5xcNuSpE8kt5yU66l2v5Asg6lEmfcK','WOddMSkNE8oTWO9xeG','rCkclCo/W4W','rSkNb8oXW6/cLW','WOnwc20GW6/dIColzHNdVmklEW','AN4pW6NcPCkBW65nW69BW6m8nrjNW47cUrldJSkGDSkbWR7dOSoAwNZcGWldHCkCWRhdRSoSjI54W4pcOL5/WOJdPISSzx4uWQLaWQ3dNZdcQ8oFEv4sf8obW6NdLXDY','tCkRaCoBW4W','lcLoWQNdTG','W7fMtW','W6qSuCkvr8kOWRP9W4xdGCk/W7e+','m0LnW7at','WPldPSo+tmkN','EYDIW7/dVghcGs0','W6hdH8oVcG','iSorW5a3','WOGVEmoQBq','dmkpW7OMW6G','W64iw1JcOWdcRMG','WPVdSN0','WRtdICozl14','ysLCW64','W4ihwq','vfei','WRldISoLp3a','emoxAmkdWQq','W5WhudS','WRDeW7dcTSktjCo+xa','WPKIymoLyG','y8kglmodWP4cea','AGxcPmknha','pHGrW5BdRa','iCotBSkuW45oqMVcNSkKW61PW4C','W4TiE8kckG','CmkHW71EBhmZW5NdJxO','WRykEmkxbq','pqH0DmkE','p2FcMCkfW7e','W6xdGoE/P+wSHEs7N+wTT+wCN0ddMHNdRxJKUBZNOQVdISkO6lwp6lY05lQw6l+j','W45iz8khjgiSW7W','gCkqWO/cHCoSfL8','W5ygWRnWW5ZdQsVcMSkwwmk3W6hdMa','W7BdJmkDW5ldUW','4P2zAgNcRSo6W4hcRUwlN+I+OEAjVowjIImM6k+C57Q257Iw','AJPdW6tdVa'];}()));}()));}());I1i1I1Il=function(){return il1I1lli;};return I1i1I1Il();};var version_ = 'jsjiami.com.v7';
function Env(t,e){class s{constructor(t){this.env=t}send(t,e="GET"){t="string"==typeof t?{url:t}:t;let s=this.get;return"POST"===e&&(s=this.post),new Promise((e,a)=>{s.call(this,t,(t,s,r)=>{t?a(t):e(s)})})}get(t){return this.send.call(this.env,t)}post(t){return this.send.call(this.env,t,"POST")}}return new class{constructor(t,e){this.name=t,this.http=new s(this),this.data=null,this.dataFile="box.dat",this.logs=[],this.isMute=!1,this.isNeedRewrite=!1,this.logSeparator="\n",this.encoding="utf-8",this.startTime=(new Date).getTime(),Object.assign(this,e),this.log("",`🔔${this.name}, 开始!`)}getEnv(){return"undefined"!=typeof $environment&&$environment["surge-version"]?"Surge":"undefined"!=typeof $environment&&$environment["stash-version"]?"Stash":"undefined"!=typeof module&&module.exports?"Node.js":"undefined"!=typeof $task?"Quantumult X":"undefined"!=typeof $loon?"Loon":"undefined"!=typeof $rocket?"Shadowrocket":void 0}isNode(){return"Node.js"===this.getEnv()}isQuanX(){return"Quantumult X"===this.getEnv()}isSurge(){return"Surge"===this.getEnv()}isLoon(){return"Loon"===this.getEnv()}isShadowrocket(){return"Shadowrocket"===this.getEnv()}isStash(){return"Stash"===this.getEnv()}toObj(t,e=null){try{return JSON.parse(t)}catch{return e}}toStr(t,e=null){try{return JSON.stringify(t)}catch{return e}}getjson(t,e){let s=e;const a=this.getdata(t);if(a)try{s=JSON.parse(this.getdata(t))}catch{}return s}setjson(t,e){try{return this.setdata(JSON.stringify(t),e)}catch{return!1}}getScript(t){return new Promise(e=>{this.get({url:t},(t,s,a)=>e(a))})}runScript(t,e){return new Promise(s=>{let a=this.getdata("@chavy_boxjs_userCfgs.httpapi");a=a?a.replace(/\n/g,"").trim():a;let r=this.getdata("@chavy_boxjs_userCfgs.httpapi_timeout");r=r?1*r:20,r=e&&e.timeout?e.timeout:r;const[i,o]=a.split("@"),n={url:`http://${o}/v1/scripting/evaluate`,body:{script_text:t,mock_type:"cron",timeout:r},headers:{"X-Key":i,Accept:"*/*"},timeout:r};this.post(n,(t,e,a)=>s(a))}).catch(t=>this.logErr(t))}loaddata(){if(!this.isNode())return{};{this.fs=this.fs?this.fs:require("fs"),this.path=this.path?this.path:require("path");const t=this.path.resolve(this.dataFile),e=this.path.resolve(process.cwd(),this.dataFile),s=this.fs.existsSync(t),a=!s&&this.fs.existsSync(e);if(!s&&!a)return{};{const a=s?t:e;try{return JSON.parse(this.fs.readFileSync(a))}catch(t){return{}}}}}writedata(){if(this.isNode()){this.fs=this.fs?this.fs:require("fs"),this.path=this.path?this.path:require("path");const t=this.path.resolve(this.dataFile),e=this.path.resolve(process.cwd(),this.dataFile),s=this.fs.existsSync(t),a=!s&&this.fs.existsSync(e),r=JSON.stringify(this.data);s?this.fs.writeFileSync(t,r):a?this.fs.writeFileSync(e,r):this.fs.writeFileSync(t,r)}}lodash_get(t,e,s){const a=e.replace(/\[(\d+)\]/g,".$1").split(".");let r=t;for(const t of a)if(r=Object(r)[t],void 0===r)return s;return r}lodash_set(t,e,s){return Object(t)!==t?t:(Array.isArray(e)||(e=e.toString().match(/[^.[\]]+/g)||[]),e.slice(0,-1).reduce((t,s,a)=>Object(t[s])===t[s]?t[s]:t[s]=Math.abs(e[a+1])>>0==+e[a+1]?[]:{},t)[e[e.length-1]]=s,t)}getdata(t){let e=this.getval(t);if(/^@/.test(t)){const[,s,a]=/^@(.*?)\.(.*?)$/.exec(t),r=s?this.getval(s):"";if(r)try{const t=JSON.parse(r);e=t?this.lodash_get(t,a,""):e}catch(t){e=""}}return e}setdata(t,e){let s=!1;if(/^@/.test(e)){const[,a,r]=/^@(.*?)\.(.*?)$/.exec(e),i=this.getval(a),o=a?"null"===i?null:i||"{}":"{}";try{const e=JSON.parse(o);this.lodash_set(e,r,t),s=this.setval(JSON.stringify(e),a)}catch(e){const i={};this.lodash_set(i,r,t),s=this.setval(JSON.stringify(i),a)}}else s=this.setval(t,e);return s}getval(t){switch(this.getEnv()){case"Surge":case"Loon":case"Stash":case"Shadowrocket":return $persistentStore.read(t);case"Quantumult X":return $prefs.valueForKey(t);case"Node.js":return this.data=this.loaddata(),this.data[t];default:return this.data&&this.data[t]||null}}setval(t,e){switch(this.getEnv()){case"Surge":case"Loon":case"Stash":case"Shadowrocket":return $persistentStore.write(t,e);case"Quantumult X":return $prefs.setValueForKey(t,e);case"Node.js":return this.data=this.loaddata(),this.data[e]=t,this.writedata(),!0;default:return this.data&&this.data[e]||null}}initGotEnv(t){this.got=this.got?this.got:require("got"),this.cktough=this.cktough?this.cktough:require("tough-cookie"),this.ckjar=this.ckjar?this.ckjar:new this.cktough.CookieJar,t&&(t.headers=t.headers?t.headers:{},void 0===t.headers.Cookie&&void 0===t.cookieJar&&(t.cookieJar=this.ckjar))}get(t,e=(()=>{})){switch(t.headers&&(delete t.headers["Content-Type"],delete t.headers["Content-Length"],delete t.headers["content-type"],delete t.headers["content-length"]),t.params&&(t.url+="?"+this.queryStr(t.params)),this.getEnv()){case"Surge":case"Loon":case"Stash":case"Shadowrocket":default:this.isSurge()&&this.isNeedRewrite&&(t.headers=t.headers||{},Object.assign(t.headers,{"X-Surge-Skip-Scripting":!1})),$httpClient.get(t,(t,s,a)=>{!t&&s&&(s.body=a,s.statusCode=s.status?s.status:s.statusCode,s.status=s.statusCode),e(t,s,a)});break;case"Quantumult X":this.isNeedRewrite&&(t.opts=t.opts||{},Object.assign(t.opts,{hints:!1})),$task.fetch(t).then(t=>{const{statusCode:s,statusCode:a,headers:r,body:i,bodyBytes:o}=t;e(null,{status:s,statusCode:a,headers:r,body:i,bodyBytes:o},i,o)},t=>e(t&&t.error||"UndefinedError"));break;case"Node.js":let s=require("iconv-lite");this.initGotEnv(t),this.got(t).on("redirect",(t,e)=>{try{if(t.headers["set-cookie"]){const s=t.headers["set-cookie"].map(this.cktough.Cookie.parse).toString();s&&this.ckjar.setCookieSync(s,null),e.cookieJar=this.ckjar}}catch(t){this.logErr(t)}}).then(t=>{const{statusCode:a,statusCode:r,headers:i,rawBody:o}=t,n=s.decode(o,this.encoding);e(null,{status:a,statusCode:r,headers:i,rawBody:o,body:n},n)},t=>{const{message:a,response:r}=t;e(a,r,r&&s.decode(r.rawBody,this.encoding))})}}post(t,e=(()=>{})){const s=t.method?t.method.toLocaleLowerCase():"post";switch(t.body&&t.headers&&!t.headers["Content-Type"]&&!t.headers["content-type"]&&(t.headers["content-type"]="application/x-www-form-urlencoded"),t.headers&&(delete t.headers["Content-Length"],delete t.headers["content-length"]),this.getEnv()){case"Surge":case"Loon":case"Stash":case"Shadowrocket":default:this.isSurge()&&this.isNeedRewrite&&(t.headers=t.headers||{},Object.assign(t.headers,{"X-Surge-Skip-Scripting":!1})),$httpClient[s](t,(t,s,a)=>{!t&&s&&(s.body=a,s.statusCode=s.status?s.status:s.statusCode,s.status=s.statusCode),e(t,s,a)});break;case"Quantumult X":t.method=s,this.isNeedRewrite&&(t.opts=t.opts||{},Object.assign(t.opts,{hints:!1})),$task.fetch(t).then(t=>{const{statusCode:s,statusCode:a,headers:r,body:i,bodyBytes:o}=t;e(null,{status:s,statusCode:a,headers:r,body:i,bodyBytes:o},i,o)},t=>e(t&&t.error||"UndefinedError"));break;case"Node.js":let a=require("iconv-lite");this.initGotEnv(t);const{url:r,...i}=t;this.got[s](r,i).then(t=>{const{statusCode:s,statusCode:r,headers:i,rawBody:o}=t,n=a.decode(o,this.encoding);e(null,{status:s,statusCode:r,headers:i,rawBody:o,body:n},n)},t=>{const{message:s,response:r}=t;e(s,r,r&&a.decode(r.rawBody,this.encoding))})}}time(t,e=null){const s=e?new Date(e):new Date;let a={"M+":s.getMonth()+1,"d+":s.getDate(),"H+":s.getHours(),"m+":s.getMinutes(),"s+":s.getSeconds(),"q+":Math.floor((s.getMonth()+3)/3),S:s.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(s.getFullYear()+"").substr(4-RegExp.$1.length)));for(let e in a)new RegExp("("+e+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?a[e]:("00"+a[e]).substr((""+a[e]).length)));return t}queryStr(t){let e="";for(const s in t){let a=t[s];null!=a&&""!==a&&("object"==typeof a&&(a=JSON.stringify(a)),e+=`${s}=${a}&`)}return e=e.substring(0,e.length-1),e}msg(e=t,s="",a="",r){const i=t=>{switch(typeof t){case void 0:return t;case"string":switch(this.getEnv()){case"Surge":case"Stash":default:return{url:t};case"Loon":case"Shadowrocket":return t;case"Quantumult X":return{"open-url":t};case"Node.js":return}case"object":switch(this.getEnv()){case"Surge":case"Stash":case"Shadowrocket":default:{let e=t.url||t.openUrl||t["open-url"];return{url:e}}case"Loon":{let e=t.openUrl||t.url||t["open-url"],s=t.mediaUrl||t["media-url"];return{openUrl:e,mediaUrl:s}}case"Quantumult X":{let e=t["open-url"]||t.url||t.openUrl,s=t["media-url"]||t.mediaUrl,a=t["update-pasteboard"]||t.updatePasteboard;return{"open-url":e,"media-url":s,"update-pasteboard":a}}case"Node.js":return}default:return}};if(!this.isMute)switch(this.getEnv()){case"Surge":case"Loon":case"Stash":case"Shadowrocket":default:$notification.post(e,s,a,i(r));break;case"Quantumult X":$notify(e,s,a,i(r));break;case"Node.js":}if(!this.isMuteLog){let t=["","==============📣系统通知📣=============="];t.push(e),s&&t.push(s),a&&t.push(a),console.log(t.join("\n")),this.logs=this.logs.concat(t)}}log(...t){t.length>0&&(this.logs=[...this.logs,...t]),console.log(t.join(this.logSeparator))}logErr(t,e){switch(this.getEnv()){case"Surge":case"Loon":case"Stash":case"Shadowrocket":case"Quantumult X":default:this.log("",`❗️${this.name}, 错误!`,t);break;case"Node.js":this.log("",`❗️${this.name}, 错误!`,t.stack)}}wait(t){return new Promise(e=>setTimeout(e,t))}done(t={}){const e=(new Date).getTime(),s=(e-this.startTime)/1e3;switch(this.log("",`🔔${this.name}, 结束! 🕛 ${s} 秒`),this.log(),this.getEnv()){case"Surge":case"Loon":case"Stash":case"Shadowrocket":case"Quantumult X":default:$done(t);break;case"Node.js":process.exit(1)}}}(t,e)}
