/*
 * 松过VPN
 * 提取节点

[rewrite_local]

http:\/\/.*\.aliyunga0019\.com\/yunbao\/curnd url script-response-body https://raw.githubusercontent.com/Yu9191/Rewrite/main/sgvpn.js

[mitm]

hostname = *.aliyunga0019.com

*/
var iｉl='jsjiami.com.v7';const llIIiiII=II1iiIl;(function(lliIII11,ilil1lIi,liI1ill,iI1i1I1i,lI1III1I,ii1l11,IIili){return lliIII11=lliIII11>>0x6,ii1l11='hs',IIili='hs',function(iliii1i,IlI1i1li,Iil1l1ll,IlIIIi11,I1lliI1l){const IIIi1IlI=II1iiIl;IlIIIi11='tfi',ii1l11=IlIIIi11+ii1l11,I1lliI1l='up',IIili+=I1lliI1l,ii1l11=Iil1l1ll(ii1l11),IIili=Iil1l1ll(IIili),Iil1l1ll=0x0;const Il111IIl=iliii1i();while(!![]&&--iI1i1I1i+IlI1i1li){try{IlIIIi11=-parseInt(IIIi1IlI(0x177,'$W3@'))/0x1*(parseInt(IIIi1IlI(0x17c,'[(4r'))/0x2)+-parseInt(IIIi1IlI(0x14e,'[(4r'))/0x3*(-parseInt(IIIi1IlI(0x15f,'fItt'))/0x4)+-parseInt(IIIi1IlI(0x1c9,'Lg0J'))/0x5+-parseInt(IIIi1IlI(0x186,'!7cS'))/0x6*(parseInt(IIIi1IlI(0x136,'bu5*'))/0x7)+-parseInt(IIIi1IlI(0x16d,'RU^l'))/0x8*(-parseInt(IIIi1IlI(0x131,'yTD5'))/0x9)+-parseInt(IIIi1IlI(0x141,'([ps'))/0xa*(parseInt(IIIi1IlI(0x1ac,'KM%m'))/0xb)+parseInt(IIIi1IlI(0x180,'d3zk'))/0xc;}catch(II1IIilI){IlIIIi11=Iil1l1ll;}finally{I1lliI1l=Il111IIl[ii1l11]();if(lliIII11<=iI1i1I1i)Iil1l1ll?lI1III1I?IlIIIi11=I1lliI1l:lI1III1I=I1lliI1l:Iil1l1ll=I1lliI1l;else{if(Iil1l1ll==lI1III1I['replace'](/[ugTwWKkNVIRCAdBPeSXUp=]/g,'')){if(IlIIIi11===IlI1i1li){Il111IIl['un'+ii1l11](I1lliI1l);break;}Il111IIl[IIili](I1lliI1l);}}}}}(liI1ill,ilil1lIi,function(lI1li1li,liI1iIl1,Ii1Iill,l1IiliI,ll11li,Il111Il,iIIIIl){return liI1iIl1='\x73\x70\x6c\x69\x74',lI1li1li=arguments[0x0],lI1li1li=lI1li1li[liI1iIl1](''),Ii1Iill='\x72\x65\x76\x65\x72\x73\x65',lI1li1li=lI1li1li[Ii1Iill]('\x76'),l1IiliI='\x6a\x6f\x69\x6e',(0x187d93,lI1li1li[l1IiliI](''));});}(0x3240,0x3974f,liiI1l1,0xcb),liiI1l1)&&(iｉl=`\xd6d`);const $=new Env(llIIiiII(0x134,'FwVO'),{'logLevel':llIIiiII(0x1b5,'iJqH')});var body=$response[llIIiiII(0x1d6,'#dUd')];const code=/"code":(\d+)/[llIIiiII(0x13e,'6aMi')](body)?.[0x1]||0x0;$[llIIiiII(0x19c,'hh3S')](llIIiiII(0x150,'#dUd')+code);function II1iiIl(_0x515115,_0xb2733a){const _0x105c61=liiI1l1();return II1iiIl=function(_0xbddb52,_0x12a08a){_0xbddb52=_0xbddb52-0x130;let _0x2958eb=_0x105c61[_0xbddb52];if(II1iiIl['KWyOrM']===undefined){var _0x2d53d3=function(_0x3aa1df){const _0x3e27b2='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0xa123c4='',_0x40cca3='';for(let _0xfc4c3a=0x0,_0xff1821,_0xee94d9,_0x12b397=0x0;_0xee94d9=_0x3aa1df['charAt'](_0x12b397++);~_0xee94d9&&(_0xff1821=_0xfc4c3a%0x4?_0xff1821*0x40+_0xee94d9:_0xee94d9,_0xfc4c3a++%0x4)?_0xa123c4+=String['fromCharCode'](0xff&_0xff1821>>(-0x2*_0xfc4c3a&0x6)):0x0){_0xee94d9=_0x3e27b2['indexOf'](_0xee94d9);}for(let _0x4d3521=0x0,_0x3d4d83=_0xa123c4['length'];_0x4d3521<_0x3d4d83;_0x4d3521++){_0x40cca3+='%'+('00'+_0xa123c4['charCodeAt'](_0x4d3521)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x40cca3);};const _0x267a3a=function(_0x500a5e,_0x3f3693){let _0x1ceb44=[],_0x3564c4=0x0,_0x8a17e,_0x18847d='';_0x500a5e=_0x2d53d3(_0x500a5e);let _0x4b7e3b;for(_0x4b7e3b=0x0;_0x4b7e3b<0x100;_0x4b7e3b++){_0x1ceb44[_0x4b7e3b]=_0x4b7e3b;}for(_0x4b7e3b=0x0;_0x4b7e3b<0x100;_0x4b7e3b++){_0x3564c4=(_0x3564c4+_0x1ceb44[_0x4b7e3b]+_0x3f3693['charCodeAt'](_0x4b7e3b%_0x3f3693['length']))%0x100,_0x8a17e=_0x1ceb44[_0x4b7e3b],_0x1ceb44[_0x4b7e3b]=_0x1ceb44[_0x3564c4],_0x1ceb44[_0x3564c4]=_0x8a17e;}_0x4b7e3b=0x0,_0x3564c4=0x0;for(let _0x102d64=0x0;_0x102d64<_0x500a5e['length'];_0x102d64++){_0x4b7e3b=(_0x4b7e3b+0x1)%0x100,_0x3564c4=(_0x3564c4+_0x1ceb44[_0x4b7e3b])%0x100,_0x8a17e=_0x1ceb44[_0x4b7e3b],_0x1ceb44[_0x4b7e3b]=_0x1ceb44[_0x3564c4],_0x1ceb44[_0x3564c4]=_0x8a17e,_0x18847d+=String['fromCharCode'](_0x500a5e['charCodeAt'](_0x102d64)^_0x1ceb44[(_0x1ceb44[_0x4b7e3b]+_0x1ceb44[_0x3564c4])%0x100]);}return _0x18847d;};II1iiIl['RsayEi']=_0x267a3a,_0x515115=arguments,II1iiIl['KWyOrM']=!![];}const _0x953169=_0x105c61[0x0],_0x5d4823=_0xbddb52+_0x953169,_0x2fe90a=_0x515115[_0x5d4823];return!_0x2fe90a?(II1iiIl['Fgtyol']===undefined&&(II1iiIl['Fgtyol']=!![]),_0x2958eb=II1iiIl['RsayEi'](_0x2958eb,_0x12a08a),_0x515115[_0x5d4823]=_0x2958eb):_0x2958eb=_0x2fe90a,_0x2958eb;},II1iiIl(_0x515115,_0xb2733a);}code!=0xc8?($[llIIiiII(0x1c8,'%VLe')](llIIiiII(0x137,'Uxgs')+(body[llIIiiII(0x172,'d3zk')]||llIIiiII(0x14c,'3%cS'))),$[llIIiiII(0x198,'3%cS')]({})):((async()=>{const Il1111Ii=llIIiiII,i1Iliii1={'KIPfR':Il1111Ii(0x1cb,'kMUA'),'Bdrdp':Il1111Ii(0x140,'CWmo'),'jaTDJ':function(i1IlIi1I,lIIlIiil){return i1IlIi1I(lIIlIiil);},'khkoh':function(iIIIll1,ilillIII){return iIIIll1(ilillIII);},'KQcbg':function(lIIl111l){return lIIl111l();},'ncbPI':function(lIiIl1il,iI1lIiI1){return lIiIl1il(iI1lIiI1);},'uUiTy':Il1111Ii(0x1b0,'D%Ec'),'kBISc':function(i1liilI,I1IIl1II){return i1liilI===I1IIl1II;},'yaGPr':Il1111Ii(0x16e,'MGX6'),'yenmg':Il1111Ii(0x191,'C!3p'),'XlrvG':function(Iil1IlIi,iii111II){return Iil1IlIi!==iii111II;},'OkEHz':Il1111Ii(0x1a1,'KM%m'),'TiuBJ':function(iilIilIi,IiIiIliI){return iilIilIi!==IiIiIliI;},'dcZBm':Il1111Ii(0x173,'CWmo'),'ykIln':Il1111Ii(0x13b,'MGX6'),'Yijnu':Il1111Ii(0x14d,'0(gL'),'nxpov':Il1111Ii(0x13f,'MGX6'),'GZqXQ':function(llilII1l,lliilIIi,i11Ili11,l1l1iiI,ilIli1li){return llilII1l(lliilIIi,i11Ili11,l1l1iiI,ilIli1li);},'jRfJi':function(ii1iiili,lIlll1Il){return ii1iiili+lIlll1Il;},'JygTs':Il1111Ii(0x1d2,'kMUA'),'OpWvU':Il1111Ii(0x17e,'C!3p'),'KGYPB':Il1111Ii(0x19a,'g(bu'),'itmxJ':function(l1iIi1I,IilIili){return l1iIi1I===IilIili;},'kZZWX':Il1111Ii(0x14a,'CWmo')};try{if(i1Iliii1[Il1111Ii(0x1b8,'0(gL')](i1Iliii1[Il1111Ii(0x1c1,'MGX6')],i1Iliii1[Il1111Ii(0x179,'%yA3')])){const i1I1iiIi={'RvALr':i1Iliii1[Il1111Ii(0x153,'ZCsl')],'uaRAN':function(Illlilil,iIIII1il){const li1illll=Il1111Ii;return i1Iliii1[li1illll(0x1ba,'iJqH')](Illlilil,iIIII1il);},'mwECq':function(l1I1II1l,lll11iii){const lII1III=Il1111Ii;return i1Iliii1[lII1III(0x1b3,'f5cf')](l1I1II1l,lll11iii);},'djqgf':function(IllIIlII){const i1IlliII=Il1111Ii;return i1Iliii1[i1IlliII(0x1aa,'3%cS')](IllIIlII);}};let I1iIIllI=l1l1I11i[Il1111Ii(0x1d4,'f5cf')](i1Iliii1[Il1111Ii(0x19d,'v1j9')])||'';if(I1iIIllI&&I1iIIllI[Il1111Ii(0x17d,'xu1(')])return IIl1illI[Il1111Ii(0x175,'Z7JS')]('✅\x20'+i1l1ili[Il1111Ii(0x193,'8s98')]+Il1111Ii(0x1d3,'x#3h')),i1Iliii1[Il1111Ii(0x199,'f5cf')](I1ii1lIi,I1iIIllI),i1Iliii1[Il1111Ii(0x1ca,'!7cS')](iiIl1lIi);return iIIliIIl[Il1111Ii(0x132,'g(bu')](Il1111Ii(0x148,'C!3p')+iIIi1i11[Il1111Ii(0x16c,'kMUA')]+Il1111Ii(0x15d,'rSys')),new i1ilI11l(I1ilIIi=>{const i1IlillI=Il1111Ii;ilII1I[i1IlillI(0x1ad,'CHCs')](i1Iliii1[i1IlillI(0x147,'%yA3')])[i1IlillI(0x157,'2vNJ')](Ii11iill=>{const IilIii1I=i1IlillI;i1Illlil[IilIii1I(0x149,'bu5*')](Ii11iill,i1I1iiIi[IilIii1I(0x135,'CWmo')]),i1I1iiIi[IilIii1I(0x15b,'Vx9A')](I1iI1I,Ii11iill),Ii1ili1[IilIii1I(0x152,'D%Ec')](IilIii1I(0x1ae,'SCv8')),i1I1iiIi[IilIii1I(0x1bc,'Lg0J')](I1ilIIi,i1I1iiIi[IilIii1I(0x144,'gUv7')](i1iI1l));});});}else{const iiliil=await i1Iliii1[Il1111Ii(0x174,'%VLe')](loadUtils);if(!iiliil||i1Iliii1[Il1111Ii(0x145,'kMUA')](typeof iiliil[Il1111Ii(0x155,'%VLe')],i1Iliii1[Il1111Ii(0x146,'g(bu')])){if(i1Iliii1[Il1111Ii(0x1a7,'3%cS')](i1Iliii1[Il1111Ii(0x160,'kMUA')],i1Iliii1[Il1111Ii(0x16f,'%yA3')]))throw new ReferenceError(i1Iliii1[Il1111Ii(0x1bf,'SCv8')]);else throw new iIi1i11I(i1Iliii1[Il1111Ii(0x14b,'LDLp')]);}const Iiil1lil=iiliil[Il1111Ii(0x171,'UoNB')]();if(!Iiil1lil)throw new ReferenceError(i1Iliii1[Il1111Ii(0x18f,'d0s(')]);body=$[Il1111Ii(0x178,'hh3S')](body);const IIiiiIi1=body[Il1111Ii(0x1b1,'d3zk')][Il1111Ii(0x1af,'xu1(')],ll1Ii1Il=Iiil1lil[Il1111Ii(0x162,'iJqH')][Il1111Ii(0x16a,'oWnU')][Il1111Ii(0x130,'x#3h')](i1Iliii1[Il1111Ii(0x133,'oWnU')]),iIiIil=Iiil1lil[Il1111Ii(0x1cd,'oWnU')][Il1111Ii(0x1c7,'8s98')][Il1111Ii(0x1c4,'6aMi')](i1Iliii1[Il1111Ii(0x13a,'3%cS')]),iIllillI=i1Iliii1[Il1111Ii(0x170,'CHCs')](AES_Decrypt,IIiiiIi1,ll1Ii1Il,iIiIil,Iiil1lil);$[Il1111Ii(0x151,'Uxgs')](i1Iliii1[Il1111Ii(0x197,'kMUA')](i1Iliii1[Il1111Ii(0x15c,'fItt')],iIllillI)),$[Il1111Ii(0x1d1,'1Ki5')]($[Il1111Ii(0x187,'oWnU')],i1Iliii1[Il1111Ii(0x1a9,'Lg0J')],i1Iliii1[Il1111Ii(0x13d,'D%Ec')][Il1111Ii(0x192,'%yA3')](iIllillI));}}catch(liIlIl1){if(i1Iliii1[Il1111Ii(0x1a8,'MGX6')](i1Iliii1[Il1111Ii(0x168,'D%Ec')],i1Iliii1[Il1111Ii(0x1be,'UoNB')]))$[Il1111Ii(0x182,'2dv3')](liIlIl1);else{var iII1IIIl=i1Iilll[Il1111Ii(0x18a,'v1j9')][Il1111Ii(0x18e,'xu1(')](l11ll1Ii,llil1lI,{'iv':IIill11I,'mode':i1lI1Ii1[Il1111Ii(0x1a4,'!7cS')][Il1111Ii(0x14f,'Lg0J')],'padding':lli1IIi[Il1111Ii(0x185,'RU^l')][Il1111Ii(0x1a2,'KM%m')]});return iII1IIIl[Il1111Ii(0x1c5,'d0s(')](i11IIIil[Il1111Ii(0x189,'g(bu')][Il1111Ii(0x161,'Jp6e')]);}}finally{$[Il1111Ii(0x16b,'rSys')]({'body':body});}})());function AES_Decrypt(I1ilIiIl,llIIi11i,ll11liIi,iliillii){const l1I1i1=llIIiiII;var iIIiIii1=iliillii[l1I1i1(0x1bb,'rSys')][l1I1i1(0x188,'oWnU')](I1ilIiIl,llIIi11i,{'iv':ll11liIi,'mode':iliillii[l1I1i1(0x1c6,'f5cf')][l1I1i1(0x1cf,'3%cS')],'padding':iliillii[l1I1i1(0x156,'([ps')][l1I1i1(0x1ab,'$W3@')]});return iIIiIii1[l1I1i1(0x18b,'#dUd')](iliillii[l1I1i1(0x1d5,'CWmo')][l1I1i1(0x169,'2dv3')]);}async function loadUtils(){const Il1IIl1i=llIIiiII,Iiilllll={'WTRRa':Il1IIl1i(0x17f,'yTD5'),'YVWlX':function(liI1II1i,lil1I1I1){return liI1II1i===lil1I1I1;},'ZjaOO':Il1IIl1i(0x154,'UoNB'),'VXliw':Il1IIl1i(0x158,'%VLe'),'CebSg':function(ll1iIiII,l1Iiilii){return ll1iIiII(l1Iiilii);},'ChpLH':function(II1111lI){return II1111lI();},'eJloR':Il1IIl1i(0x1b6,'Z7JS'),'VCzLo':function(Il1IIIi1,Il11iIi1){return Il1IIIi1===Il11iIi1;},'xVkZc':Il1IIl1i(0x1c0,'FwVO'),'IoHdb':function(IIillI1,i1lili11){return IIillI1(i1lili11);}};let I111Ii1I=$[Il1IIl1i(0x176,'d3zk')](Iiilllll[Il1IIl1i(0x165,'yTD5')])||'';if(I111Ii1I&&I111Ii1I[Il1IIl1i(0x181,'FwVO')]){if(Iiilllll[Il1IIl1i(0x194,'xu1(')](Iiilllll[Il1IIl1i(0x17a,'[(4r')],Iiilllll[Il1IIl1i(0x159,'LDLp')]))return console[Il1IIl1i(0x1bd,'CWmo')]('✅\x20'+$[Il1IIl1i(0x1c3,'$W3@')]+Il1IIl1i(0x15a,'[(4r')),Iiilllll[Il1IIl1i(0x19b,'CWmo')](eval,I111Ii1I),Iiilllll[Il1IIl1i(0x1cc,'hh3S')](creatUtils);else throw new llIi11II(Iiilllll[Il1IIl1i(0x1c2,'p4KP')]);}return console[Il1IIl1i(0x1b7,'LDLp')](Il1IIl1i(0x143,'hh3S')+$[Il1IIl1i(0x19e,'Lg0J')]+Il1IIl1i(0x1a5,'YlUe')),new Promise(llIl1il=>{const i1lilli=Il1IIl1i;$[i1lilli(0x1d0,'rSys')](Iiilllll[i1lilli(0x163,'MGX6')])[i1lilli(0x183,'LDLp')](I1Ii1l1i=>{const IiIiIi1l=i1lilli;Iiilllll[IiIiIi1l(0x1b2,'Lg0J')](Iiilllll[IiIiIi1l(0x142,'Lg0J')],Iiilllll[IiIiIi1l(0x195,'bu5*')])?($[IiIiIi1l(0x13c,'Z7JS')](I1Ii1l1i,Iiilllll[IiIiIi1l(0x196,'MGX6')]),Iiilllll[IiIiIi1l(0x167,'iJqH')](eval,I1Ii1l1i),console[IiIiIi1l(0x18d,'%yA3')](IiIiIi1l(0x1ce,'8s98')),Iiilllll[IiIiIi1l(0x15e,'d0s(')](llIl1il,Iiilllll[IiIiIi1l(0x184,'d3zk')](creatUtils))):IiI1l11[IiIiIi1l(0x166,'0(gL')](Ill1lii1);});});}function liiI1l1(){const ill1Ili1=(function(){return[iｉl,'AWTjusjBkAiawwmdiKkI.PeScNoCgmU.RvX7WpVN==','DxXTWRPs','W5BdGWBdICoT','fmoGWO/dR8oQ','shXrWQ49qWtdVCkAW4BdIabgWQa','bbddQW','WPawWQnHaG','W6hdKmo/ymoI','rb/dTq','dGBdUhldTxnN','puVdPZRcI8ovqNav','WPZcL2ZdHCow','W5BdJshdImoK','jLRcKxNcKW','WOlcSCohc3BcR1b0frjXsKS','BdZdINlcSvLBWQbO','q8ohW6Cwq8o1','5OY15y+y6iMm54cH5OIT5yIo6k2w57MX5PYb55YA5PET5B+k','W7ddLIVcSJRcQUAiPWFdS8oBWR7cJ8kZWRRdICkSwcddQdZcMmohh+AvIUAZG+ACGUAVJEEHM+wkPoI/KG','xfFcTslcPdu2W5FdJZCJWQRcUW','C8kKW51UlCkd','xSoTW7ddKmoveq','fW8Rda','kGVdVfRdNa','jsOI','W6rCj8keWOBdTc8','lmkOiwm','jSkSl3rJk3C','CmkpWOi','WR/dTmoP','W48Mnmk4W4dcNmoLW7S','peZdP3ZdJ8kQExWnl8okWQy','W4pdHYG','s8ohW6OdtSoTWOi','kCktemoHWRK','lSo3WOm/ASozv8ocW4WlqCk2','WPbmWPVdS28','W4ZdHYhdHSoIWOu','mCoHWRddLq','ECoHW7m9wa','swnUE2C','u2TgWObp','xe9hWRfo','AGT+sW','BeRdO8odhW','qmkZWQ1yW64','WPu/WPfweq','WOtcL0q','WRZdLCoiDXq','W7tdU8koqa','WQ7cRSkAA8kIscpcIa','WO0flmk6W4pcGmoK','WR3cHmkoW7XJzfRcVa','WOVcMSkdW6WG','WP7cN3/cLCk0W4rGWPNdISoGrvW','WR9/cmkx'].concat((function(){return['kuVLVPZLPO/KUPhOVllcOSohWRRdGmod5lQQ56ko','aSkWWPHsW7dcN8oUxmkS','wG1LBmkM','BeDhWPfY','W5xdQSk0u8kN','rtvZtmkl','vrBcVt/dIa','W6/dHCkzW5fhqgtcTq','nmoFWORdPmoyW6/dUb16','4P62W6tcOWNdQCksfUwiHoI/NUAjHowkTxdcQ+ITRUE4IEE5RW','q8olW6CAAmoOWOtdOW','qa/dUW9nrCkpWQxdSUwoL+MeG+ADQowTP+s5NG','gWBdV2pdUhm','W4pdJmk0sCkQ','AuhdQSo8pG','W65GW6LJmL8mWRTO','W6BdP8kYW7pdOa','qatdPHvXumosf8krySk7WQVdKmkhD8oWAdP/fSoZibKrWQjXW5JdVSk7W5BdLmo6amkNWQnQohlcH3zhWO0DW7OgA8o8W4XeWO8VdCoovbf8kK1QWQBcQ8o+','dWGP','e8kZWRBdVYu','WRdcTCkXW4JdTCoLWOJdOa','W6JdO8keW4ldJq','WPhcKmoP','W7FdRCkMzSkd','WRa/WR4','qfrUWPGr','W6RcRCkCe8o1','wSkWW6DbgW','FfjTWRLk','BCosW7n2W6u','AXZcSYK','aqG6W5mx','kmkPkSobWRldMJZcKa','B0BdPCo2','cSo0WRVcIa','W4/dS8oUBCo3','WQVcRCotfCofmdxcQr/dR8oFWPK','WPLbd8kqWPa','xMLvWOTujc5nWO83AIBdJcPgw8oTvCkPjseSyv/cICoWW7hcRZeOkNX8WObHbvVcMvOTF8k5W5HfWQ/cQYBdKtXiACo7fbOOsmk8W4BcVCkxWOVcMW','WQVcKfpdQ8o0','j8kNlW','4P2AWQdcImoeW4xcV8oK5yIz6l+C5OUX5yUsWRbQ6k+H57MA57IZ','tszt','WRFcSmoocSohy1dcVqm','m8kJWQi','CNHcWOLEBNuhWOHZuvRdQMmc','F2pNVkRLR6RKU53LR4VLNyNcO8kAWROva+s7MUEHHSoxWRZOTAVOVBdKUytOVRy','zuZdTCo3n0/cTa','WRK+WRO','W5KMa8k1','nsjlW4hcLq','WPFcLspcKdVdO2rI','ECkoWOy','lmkXpgLS','5P2H5P2DW6vzfW','WO4MWPH+aq','iJW6aHeQgCo6WOZcRsqPjW'].concat((function(){return['5O2s5y2B5OQf6zAaW5tdOq','nH/cNatcU8ovvW','lSo2WOi7yCoAbmoWW5ydtCkodW','ybXGqCkA','yNHpWQHZ','wXxdPGfJhSkC','sdRdMY97','fbeTW4m','FvfDWR0pW5jDgCocog7cJKqFW4tcIq','WOKKWRbEafm3WP1zfG','lIiBWRxdRJqaW7yfWRz0WP0','W4ddSmkcASk9','8ywzUam','agfLDCo0','BNftWO1G','wSkkWQqQWRq','W6tdOr/dG8or','8yAkJSoU','ygX7ueLVqq','WRqEWOTqhG','fJiNnJ4','5PYK556b6zsj6k+b','lCkfWPBdGdv65OUWWRajwsqnjKeGWOeaWOLLWO9GW7nL5Psz5Rou5PYn5Q2M56g65yQY6lYF','Bw7cUgVcTeve','W5NdMmkG','W5GMa8kPWOJdLq','WPVdL0C','BXldPq','ix8Sxmkg','zfLzWRup','W4NdS8o5y8oXd1tcVttdTCoiW7xdT1a','z3jg','W4pdRCkBuq','W7/dTCo1BSo2nvtcOcNdOa','gZeLocq','zcZNV6NLRBVKU53LRzlLNiVcVeNdTJ7cMEs5RUEIHmkWWPROTBROVy/KU5ZOV4q','W7rAz0fZ','dmosW5VcMNq','W6RdTEw+UUwMKUs6R+I9RgZcUr4JD+s7QoEGSa','h8kJg8oMWQC','D8kCWO3dVd/cN8k+WRlcObP+otu','uN57WRLk','W51Gsmkb','W6FdRmkZ','yhLgWOzQ','guxcP1m7w8oeqSk4vCkAW4JdRa','W7pdUI7cTZ4','fmkEWPJdQtqO','W4hdP8kYW5xdOa','AcFdMcHH','z8o2W7hcRq','f8k9kJ4','WRtcUSoupa','whXmWP4','zh12zCo8oCk1nSkAm8oLW6K'];}()));}()));}());liiI1l1=function(){return ill1Ili1;};return liiI1l1();};var version_ = 'jsjiami.com.v7';
function Env(t,e){class s{constructor(t){this.env=t}send(t,e="GET"){t="string"==typeof t?{url:t}:t;let s=this.get;return"POST"===e&&(s=this.post),new Promise((e,a)=>{s.call(this,t,(t,s,r)=>{t?a(t):e(s)})})}get(t){return this.send.call(this.env,t)}post(t){return this.send.call(this.env,t,"POST")}}return new class{constructor(t,e){this.name=t,this.http=new s(this),this.data=null,this.dataFile="box.dat",this.logs=[],this.isMute=!1,this.isNeedRewrite=!1,this.logSeparator="\n",this.encoding="utf-8",this.startTime=(new Date).getTime(),Object.assign(this,e),this.log("",`🔔${this.name}, 开始!`)}getEnv(){return"undefined"!=typeof $environment&&$environment["surge-version"]?"Surge":"undefined"!=typeof $environment&&$environment["stash-version"]?"Stash":"undefined"!=typeof module&&module.exports?"Node.js":"undefined"!=typeof $task?"Quantumult X":"undefined"!=typeof $loon?"Loon":"undefined"!=typeof $rocket?"Shadowrocket":void 0}isNode(){return"Node.js"===this.getEnv()}isQuanX(){return"Quantumult X"===this.getEnv()}isSurge(){return"Surge"===this.getEnv()}isLoon(){return"Loon"===this.getEnv()}isShadowrocket(){return"Shadowrocket"===this.getEnv()}isStash(){return"Stash"===this.getEnv()}toObj(t,e=null){try{return JSON.parse(t)}catch{return e}}toStr(t,e=null){try{return JSON.stringify(t)}catch{return e}}getjson(t,e){let s=e;const a=this.getdata(t);if(a)try{s=JSON.parse(this.getdata(t))}catch{}return s}setjson(t,e){try{return this.setdata(JSON.stringify(t),e)}catch{return!1}}getScript(t){return new Promise(e=>{this.get({url:t},(t,s,a)=>e(a))})}runScript(t,e){return new Promise(s=>{let a=this.getdata("@chavy_boxjs_userCfgs.httpapi");a=a?a.replace(/\n/g,"").trim():a;let r=this.getdata("@chavy_boxjs_userCfgs.httpapi_timeout");r=r?1*r:20,r=e&&e.timeout?e.timeout:r;const[i,o]=a.split("@"),n={url:`http://${o}/v1/scripting/evaluate`,body:{script_text:t,mock_type:"cron",timeout:r},headers:{"X-Key":i,Accept:"*/*"},timeout:r};this.post(n,(t,e,a)=>s(a))}).catch(t=>this.logErr(t))}loaddata(){if(!this.isNode())return{};{this.fs=this.fs?this.fs:require("fs"),this.path=this.path?this.path:require("path");const t=this.path.resolve(this.dataFile),e=this.path.resolve(process.cwd(),this.dataFile),s=this.fs.existsSync(t),a=!s&&this.fs.existsSync(e);if(!s&&!a)return{};{const a=s?t:e;try{return JSON.parse(this.fs.readFileSync(a))}catch(t){return{}}}}}writedata(){if(this.isNode()){this.fs=this.fs?this.fs:require("fs"),this.path=this.path?this.path:require("path");const t=this.path.resolve(this.dataFile),e=this.path.resolve(process.cwd(),this.dataFile),s=this.fs.existsSync(t),a=!s&&this.fs.existsSync(e),r=JSON.stringify(this.data);s?this.fs.writeFileSync(t,r):a?this.fs.writeFileSync(e,r):this.fs.writeFileSync(t,r)}}lodash_get(t,e,s){const a=e.replace(/\[(\d+)\]/g,".$1").split(".");let r=t;for(const t of a)if(r=Object(r)[t],void 0===r)return s;return r}lodash_set(t,e,s){return Object(t)!==t?t:(Array.isArray(e)||(e=e.toString().match(/[^.[\]]+/g)||[]),e.slice(0,-1).reduce((t,s,a)=>Object(t[s])===t[s]?t[s]:t[s]=Math.abs(e[a+1])>>0==+e[a+1]?[]:{},t)[e[e.length-1]]=s,t)}getdata(t){let e=this.getval(t);if(/^@/.test(t)){const[,s,a]=/^@(.*?)\.(.*?)$/.exec(t),r=s?this.getval(s):"";if(r)try{const t=JSON.parse(r);e=t?this.lodash_get(t,a,""):e}catch(t){e=""}}return e}setdata(t,e){let s=!1;if(/^@/.test(e)){const[,a,r]=/^@(.*?)\.(.*?)$/.exec(e),i=this.getval(a),o=a?"null"===i?null:i||"{}":"{}";try{const e=JSON.parse(o);this.lodash_set(e,r,t),s=this.setval(JSON.stringify(e),a)}catch(e){const i={};this.lodash_set(i,r,t),s=this.setval(JSON.stringify(i),a)}}else s=this.setval(t,e);return s}getval(t){switch(this.getEnv()){case"Surge":case"Loon":case"Stash":case"Shadowrocket":return $persistentStore.read(t);case"Quantumult X":return $prefs.valueForKey(t);case"Node.js":return this.data=this.loaddata(),this.data[t];default:return this.data&&this.data[t]||null}}setval(t,e){switch(this.getEnv()){case"Surge":case"Loon":case"Stash":case"Shadowrocket":return $persistentStore.write(t,e);case"Quantumult X":return $prefs.setValueForKey(t,e);case"Node.js":return this.data=this.loaddata(),this.data[e]=t,this.writedata(),!0;default:return this.data&&this.data[e]||null}}initGotEnv(t){this.got=this.got?this.got:require("got"),this.cktough=this.cktough?this.cktough:require("tough-cookie"),this.ckjar=this.ckjar?this.ckjar:new this.cktough.CookieJar,t&&(t.headers=t.headers?t.headers:{},void 0===t.headers.Cookie&&void 0===t.cookieJar&&(t.cookieJar=this.ckjar))}get(t,e=(()=>{})){switch(t.headers&&(delete t.headers["Content-Type"],delete t.headers["Content-Length"],delete t.headers["content-type"],delete t.headers["content-length"]),t.params&&(t.url+="?"+this.queryStr(t.params)),this.getEnv()){case"Surge":case"Loon":case"Stash":case"Shadowrocket":default:this.isSurge()&&this.isNeedRewrite&&(t.headers=t.headers||{},Object.assign(t.headers,{"X-Surge-Skip-Scripting":!1})),$httpClient.get(t,(t,s,a)=>{!t&&s&&(s.body=a,s.statusCode=s.status?s.status:s.statusCode,s.status=s.statusCode),e(t,s,a)});break;case"Quantumult X":this.isNeedRewrite&&(t.opts=t.opts||{},Object.assign(t.opts,{hints:!1})),$task.fetch(t).then(t=>{const{statusCode:s,statusCode:a,headers:r,body:i,bodyBytes:o}=t;e(null,{status:s,statusCode:a,headers:r,body:i,bodyBytes:o},i,o)},t=>e(t&&t.error||"UndefinedError"));break;case"Node.js":let s=require("iconv-lite");this.initGotEnv(t),this.got(t).on("redirect",(t,e)=>{try{if(t.headers["set-cookie"]){const s=t.headers["set-cookie"].map(this.cktough.Cookie.parse).toString();s&&this.ckjar.setCookieSync(s,null),e.cookieJar=this.ckjar}}catch(t){this.logErr(t)}}).then(t=>{const{statusCode:a,statusCode:r,headers:i,rawBody:o}=t,n=s.decode(o,this.encoding);e(null,{status:a,statusCode:r,headers:i,rawBody:o,body:n},n)},t=>{const{message:a,response:r}=t;e(a,r,r&&s.decode(r.rawBody,this.encoding))})}}post(t,e=(()=>{})){const s=t.method?t.method.toLocaleLowerCase():"post";switch(t.body&&t.headers&&!t.headers["Content-Type"]&&!t.headers["content-type"]&&(t.headers["content-type"]="application/x-www-form-urlencoded"),t.headers&&(delete t.headers["Content-Length"],delete t.headers["content-length"]),this.getEnv()){case"Surge":case"Loon":case"Stash":case"Shadowrocket":default:this.isSurge()&&this.isNeedRewrite&&(t.headers=t.headers||{},Object.assign(t.headers,{"X-Surge-Skip-Scripting":!1})),$httpClient[s](t,(t,s,a)=>{!t&&s&&(s.body=a,s.statusCode=s.status?s.status:s.statusCode,s.status=s.statusCode),e(t,s,a)});break;case"Quantumult X":t.method=s,this.isNeedRewrite&&(t.opts=t.opts||{},Object.assign(t.opts,{hints:!1})),$task.fetch(t).then(t=>{const{statusCode:s,statusCode:a,headers:r,body:i,bodyBytes:o}=t;e(null,{status:s,statusCode:a,headers:r,body:i,bodyBytes:o},i,o)},t=>e(t&&t.error||"UndefinedError"));break;case"Node.js":let a=require("iconv-lite");this.initGotEnv(t);const{url:r,...i}=t;this.got[s](r,i).then(t=>{const{statusCode:s,statusCode:r,headers:i,rawBody:o}=t,n=a.decode(o,this.encoding);e(null,{status:s,statusCode:r,headers:i,rawBody:o,body:n},n)},t=>{const{message:s,response:r}=t;e(s,r,r&&a.decode(r.rawBody,this.encoding))})}}time(t,e=null){const s=e?new Date(e):new Date;let a={"M+":s.getMonth()+1,"d+":s.getDate(),"H+":s.getHours(),"m+":s.getMinutes(),"s+":s.getSeconds(),"q+":Math.floor((s.getMonth()+3)/3),S:s.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(s.getFullYear()+"").substr(4-RegExp.$1.length)));for(let e in a)new RegExp("("+e+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?a[e]:("00"+a[e]).substr((""+a[e]).length)));return t}queryStr(t){let e="";for(const s in t){let a=t[s];null!=a&&""!==a&&("object"==typeof a&&(a=JSON.stringify(a)),e+=`${s}=${a}&`)}return e=e.substring(0,e.length-1),e}msg(e=t,s="",a="",r){const i=t=>{switch(typeof t){case void 0:return t;case"string":switch(this.getEnv()){case"Surge":case"Stash":default:return{url:t};case"Loon":case"Shadowrocket":return t;case"Quantumult X":return{"open-url":t};case"Node.js":return}case"object":switch(this.getEnv()){case"Surge":case"Stash":case"Shadowrocket":default:{let e=t.url||t.openUrl||t["open-url"];return{url:e}}case"Loon":{let e=t.openUrl||t.url||t["open-url"],s=t.mediaUrl||t["media-url"];return{openUrl:e,mediaUrl:s}}case"Quantumult X":{let e=t["open-url"]||t.url||t.openUrl,s=t["media-url"]||t.mediaUrl,a=t["update-pasteboard"]||t.updatePasteboard;return{"open-url":e,"media-url":s,"update-pasteboard":a}}case"Node.js":return}default:return}};if(!this.isMute)switch(this.getEnv()){case"Surge":case"Loon":case"Stash":case"Shadowrocket":default:$notification.post(e,s,a,i(r));break;case"Quantumult X":$notify(e,s,a,i(r));break;case"Node.js":}if(!this.isMuteLog){let t=["","==============📣系统通知📣=============="];t.push(e),s&&t.push(s),a&&t.push(a),console.log(t.join("\n")),this.logs=this.logs.concat(t)}}log(...t){t.length>0&&(this.logs=[...this.logs,...t]),console.log(t.join(this.logSeparator))}logErr(t,e){switch(this.getEnv()){case"Surge":case"Loon":case"Stash":case"Shadowrocket":case"Quantumult X":default:this.log("",`❗️${this.name}, 错误!`,t);break;case"Node.js":this.log("",`❗️${this.name}, 错误!`,t.stack)}}wait(t){return new Promise(e=>setTimeout(e,t))}done(t={}){const e=(new Date).getTime(),s=(e-this.startTime)/1e3;switch(this.log("",`🔔${this.name}, 结束! 🕛 ${s} 秒`),this.log(),this.getEnv()){case"Surge":case"Loon":case"Stash":case"Shadowrocket":case"Quantumult X":default:$done(t);break;case"Node.js":process.exit(1)}}}(t,e)}
